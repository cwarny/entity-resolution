# -*- coding: utf-8 -*-

###############################################################################
#
# CreateCoupon
# Creates a coupon that can be redeemed by customers for a discount.
#
# Python version 2.6
#
###############################################################################

from temboo.core.choreography import Choreography
from temboo.core.choreography import InputSet
from temboo.core.choreography import ResultSet
from temboo.core.choreography import ChoreographyExecution
from temboo.outputs.Stripe.StripeCoupon import StripeCoupon

import json

class CreateCoupon(Choreography):

    def __init__(self, temboo_session):
        """
        Create a new instance of the CreateCoupon Choreo. A TembooSession object, containing a valid
        set of Temboo credentials, must be supplied.
        """
        Choreography.__init__(self, temboo_session, '/Library/Stripe/Coupons/CreateCoupon')


    def new_input_set(self):
        return CreateCouponInputSet()

    def _make_result_set(self, result, path):
        return CreateCouponResultSet(result, path)

    def _make_execution(self, session, exec_id, path):
        return CreateCouponChoreographyExecution(session, exec_id, path)

class CreateCouponInputSet(InputSet):
    """
    An InputSet with methods appropriate for specifying the inputs to the CreateCoupon
    Choreo. The InputSet object is used to specify input parameters when executing this Choreo.
    """
    def set_APIKey(self, value):
        """
        Set the value of the APIKey input for this Choreo. ((required, string) The API Key provided by Stripe)
        """
        InputSet._set_input(self, 'APIKey', value)
    def set_CouponID(self, value):
        """
        Set the value of the CouponID input for this Choreo. ((optional, string) The unique identifier of your choice for the coupon. If not specified, a random code will be generated by Stripe.)
        """
        InputSet._set_input(self, 'CouponID', value)
    def set_DurationInMonths(self, value):
        """
        Set the value of the DurationInMonths input for this Choreo. ((optional, integer) If Duration is set to 'repeating', specify the number of months the discount will be valid.)
        """
        InputSet._set_input(self, 'DurationInMonths', value)
    def set_Duration(self, value):
        """
        Set the value of the Duration input for this Choreo. ((required, string) Indicates how long the discount will be in effect. Valid values are: forever, once, repeating.)
        """
        InputSet._set_input(self, 'Duration', value)
    def set_MaxRedemptions(self, value):
        """
        Set the value of the MaxRedemptions input for this Choreo. ((optional, integer) Specify the number times the coupon can be used.)
        """
        InputSet._set_input(self, 'MaxRedemptions', value)
    def set_PercentOff(self, value):
        """
        Set the value of the PercentOff input for this Choreo. ((required, integer) A integer between 1 and 100 that represents the discount that the coupon will apply when used by a customer)
        """
        InputSet._set_input(self, 'PercentOff', value)
    def set_RedeemBy(self, value):
        """
        Set the value of the RedeemBy input for this Choreo. ((optional, date) An epoch timestamp in seconds representing the the last time at which the coupon can be used. Specify timestamp in UTC.)
        """
        InputSet._set_input(self, 'RedeemBy', value)

class CreateCouponResultSet(ResultSet):
    """
    A ResultSet with methods tailored to the values returned by the CreateCoupon Choreo.
    The ResultSet object is used to retrieve the results of a Choreo execution.
    """
    		
    def getJSONFromString(self, str):
        return json.loads(str)
    
    def get_Response(self):
        """
        Retrieve the value for the "Response" output from this Choreo execution. ((json) The response from Stripe)
        """
        return self._output.get('Response', None)
    def getCoupon(self):
        """
        A coupon contains information about a percent-off discount you might want to apply to a customer. Coupons only apply to invoices created for recurring subscriptions and invoice items; they do not apply to one-off charges.
        """
        return StripeCoupon(self.getJSONFromString(self._output.get('Response', [])))

class CreateCouponChoreographyExecution(ChoreographyExecution):
    
    def _make_result_set(self, response, path):
        return CreateCouponResultSet(response, path)
